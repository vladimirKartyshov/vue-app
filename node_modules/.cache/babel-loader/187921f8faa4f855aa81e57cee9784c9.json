{"ast":null,"code":"import Vue from 'vue';\nimport Vuex from 'vuex';\nimport products from '@/data/products';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../config';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    cartProducts: [{\n      productId: 1,\n      amount: 2\n    }]\n  },\n  userAccessKey: null,\n  cartProductsData: [],\n  mutations: {\n    addProductToCart(state, {\n      productId,\n      amount\n    }) {\n      const item = state.cartProducts.find(item => item.productId === productId);\n\n      if (item) {\n        item.amount += amount;\n      } else {\n        state.cartProducts.push({\n          productId,\n          amount\n        });\n      }\n    },\n\n    updateCartProductAmount(state, {\n      productId,\n      amount\n    }) {\n      const item = state.cartProducts.find(item => item.productId === productId);\n\n      if (item) {\n        item.amount = amount;\n      }\n    },\n\n    deletCartProduct(state, productId) {\n      state.cartProducts = state.cartProducts.filter(item => item.productId !== productId);\n    },\n\n    updateUserAccessKey(state, accessKey) {\n      state.userAccessKey = accessKey;\n    },\n\n    updateCartProductsData(state, itmes) {\n      state.cartProductsData = itmes;\n    }\n\n  },\n  getters: {\n    cartDetailProducts(state) {\n      return state.cartProducts.map(item => {\n        return { ...item,\n          product: products.find(p => p.id === item.productId)\n        };\n      });\n    },\n\n    cartTotalPrice(state, getters) {\n      return getters.cartDetailProducts.reduce((acc, item) => item.product.price * item.amount + acc, 0);\n    }\n\n  },\n  actions: {\n    loadCart(context) {\n      axios.get(API_BASE_URL + '/baskets').then(response => {\n        context.commit('updateUserAccessKey', response.data);\n        context.commit('');\n      });\n    }\n\n  }\n});","map":{"version":3,"names":["Vue","Vuex","products","axios","API_BASE_URL","use","Store","state","cartProducts","productId","amount","userAccessKey","cartProductsData","mutations","addProductToCart","item","find","push","updateCartProductAmount","deletCartProduct","filter","updateUserAccessKey","accessKey","updateCartProductsData","itmes","getters","cartDetailProducts","map","product","p","id","cartTotalPrice","reduce","acc","price","actions","loadCart","context","get","then","response","commit","data"],"sources":["/home/Kratos/Vs Code/vue-ishop/src/store/index.js"],"sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport products from '@/data/products'\nimport axios from 'axios'\nimport {API_BASE_URL} from '../config'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    cartProducts: [{productId: 1, amount: 2}],\n  },\n\n  userAccessKey: null,\n\n  cartProductsData: [],\n\n  mutations: {\n    addProductToCart(state, {productId, amount}) {\n      const item = state.cartProducts.find(\n        (item) => item.productId === productId\n      )\n      if (item) {\n        item.amount += amount\n      } else {\n        state.cartProducts.push({\n          productId,\n          amount,\n        })\n      }\n    },\n    updateCartProductAmount(state, {productId, amount}) {\n      const item = state.cartProducts.find(\n        (item) => item.productId === productId\n      )\n      if (item) {\n        item.amount = amount\n      }\n    },\n    deletCartProduct(state, productId) {\n      state.cartProducts = state.cartProducts.filter(\n        (item) => item.productId !== productId\n      )\n    },\n    updateUserAccessKey(state, accessKey) {\n      state.userAccessKey = accessKey\n    },\n    updateCartProductsData(state, itmes) {\n      state.cartProductsData = itmes\n    },\n  },\n  getters: {\n    cartDetailProducts(state) {\n      return state.cartProducts.map((item) => {\n        return {\n          ...item,\n          product: products.find((p) => p.id === item.productId),\n        }\n      })\n    },\n    cartTotalPrice(state, getters) {\n      return getters.cartDetailProducts.reduce(\n        (acc, item) => item.product.price * item.amount + acc,\n        0\n      )\n    },\n  },\n\n  actions: {\n    loadCart(context) {\n      axios.get(API_BASE_URL + '/baskets')\n      .then((response) => {\n        context.commit('updateUserAccessKey', response.data)\n        context.commit('')\n      })\n\n    },\n  },\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}